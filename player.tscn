[gd_scene load_steps=23 format=3 uid="uid://cdifpvd2rt0fg"]

[ext_resource type="Script" path="res://player.gd" id="1_uxq1m"]
[ext_resource type="Resource" uid="uid://doc5edwb7g1q0" path="res://weapons/player_inventory.tres" id="2_hyhxc"]
[ext_resource type="ArrayMesh" uid="uid://m2ce8r0qwrdl" path="res://guardian_base.obj" id="2_ic66e"]
[ext_resource type="PackedScene" uid="uid://di3fv8g2jjenb" path="res://weapons/eyasluna/weapon.tscn" id="2_pt21w"]
[ext_resource type="Texture2D" uid="uid://cuf5w88u5l8d3" path="res://bullet_hole.png" id="3_26x8t"]
[ext_resource type="Texture2D" uid="uid://cve0nf46jywy5" path="res://weapons/KovaaK-Crosshair(2).png" id="5_nk0au"]
[ext_resource type="Texture2D" uid="uid://pdyngf85yq41" path="res://flash.png" id="5_x1jry"]
[ext_resource type="FontFile" uid="uid://dfr414ntewvp8" path="res://Retro Gaming.ttf" id="6_rga22"]
[ext_resource type="Script" path="res://Label.gd" id="8_81ckk"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_x4oer"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_3n7ja"]
bg_color = Color(0.6, 0.6, 0.6, 0.643137)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_wnusq"]
bg_color = Color(1, 1, 1, 1)

[sub_resource type="Gradient" id="Gradient_bmwc4"]
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_67xtt"]
gradient = SubResource("Gradient_bmwc4")

[sub_resource type="Gradient" id="Gradient_ibql5"]
colors = PackedColorArray(0, 0, 0, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_sniyp"]
gradient = SubResource("Gradient_ibql5")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_f4qh4"]
spread = 45.54
gravity = Vector3(0, -1, 0)
initial_velocity_min = 0.22
initial_velocity_max = 0.56
radial_accel_min = -7.02
radial_accel_max = 7.02
color_ramp = SubResource("GradientTexture1D_sniyp")
color_initial_ramp = SubResource("GradientTexture1D_67xtt")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ql31q"]
transparency = 1
albedo_texture = ExtResource("5_x1jry")
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="PlaneMesh" id="PlaneMesh_o5l1u"]
material = SubResource("StandardMaterial3D_ql31q")
size = Vector2(0.2, 0.2)
orientation = 2

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_lp6th"]

[sub_resource type="ViewportTexture" id="ViewportTexture_ru46m"]
viewport_path = NodePath("UsernameHover/SubViewport")

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_emjce"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/sync = true
properties/1/path = NodePath(".:rotation")
properties/1/spawn = true
properties/1/sync = true
properties/2/path = NodePath("Head:rotation")
properties/2/spawn = true
properties/2/sync = true

[node name="player" type="CharacterBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.01727, 0)
collision_layer = 0
script = ExtResource("1_uxq1m")
speed = 10.0
jump = 10.0
sensitivity = 2.0
inventory = ExtResource("2_hyhxc")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1.28585, 0, 0, 0, 1.28585, 0, 0, 0, 1.28585, 0, -0.987032, 0)
mesh = ExtResource("2_ic66e")
skeleton = NodePath("")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_x4oer")

[node name="Head" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.844048, -0.126293)

[node name="Camera3D" type="Camera3D" parent="Head"]

[node name="RayCast3D" type="RayCast3D" parent="Head/Camera3D"]
target_position = Vector3(0, 0, -100)
collision_mask = 6
collide_with_areas = true

[node name="Decal" type="Decal" parent="Head/Camera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0143285, -1.7679)
visible = false
texture_albedo = ExtResource("3_26x8t")
texture_normal = ExtResource("3_26x8t")

[node name="Weapon" parent="Head/Camera3D" instance=ExtResource("2_pt21w")]
transform = Transform3D(1.278, 0, 0, 0, 1.278, 0, 0, 0, 1.278, 0.351405, -0.194719, -0.371065)

[node name="HUD" type="Node" parent="."]

[node name="CanvasLayer" type="CanvasLayer" parent="HUD"]

[node name="ProgressBar" type="ProgressBar" parent="HUD/CanvasLayer"]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -220.0
offset_top = 30.0
offset_right = 220.0
offset_bottom = 45.0
grow_horizontal = 2
theme_override_styles/background = SubResource("StyleBoxFlat_3n7ja")
theme_override_styles/fill = SubResource("StyleBoxFlat_wnusq")
value = 100.0
show_percentage = false
metadata/_edit_use_anchors_ = true

[node name="TextureRect" type="TextureRect" parent="HUD/CanvasLayer"]
texture_filter = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -10.0
offset_top = -10.0
offset_right = 10.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(1.098, 1.098)
size_flags_horizontal = 4
size_flags_vertical = 4
texture = ExtResource("5_nk0au")
stretch_mode = 2

[node name="AmmoCount" type="Label" parent="HUD/CanvasLayer"]
visible = false
texture_filter = 3
offset_left = 26.0
offset_top = 592.0
offset_right = 66.0
offset_bottom = 637.0
theme_override_fonts/font = ExtResource("6_rga22")
theme_override_font_sizes/font_size = 22
text = "0
"

[node name="GPUParticles3D" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -2.44193)
emitting = false
lifetime = 0.7
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_f4qh4")
draw_pass_1 = SubResource("PlaneMesh_o5l1u")

[node name="Area3D" type="Area3D" parent="."]
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
shape = SubResource("CapsuleShape3D_lp6th")

[node name="Username" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.251, 0)

[node name="UsernameHover" type="Sprite3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 1.20245, 0)
billboard = 1
texture_filter = 2
texture = SubResource("ViewportTexture_ru46m")

[node name="SubViewport" type="SubViewport" parent="UsernameHover"]
transparent_bg = true
canvas_item_default_texture_filter = 3
size = Vector2i(232, 26)

[node name="Label" type="Label" parent="UsernameHover/SubViewport"]
texture_filter = 3
offset_right = 66.0
offset_bottom = 31.0
theme_override_fonts/font = ExtResource("6_rga22")
theme_override_font_sizes/font_size = 22
text = "user"
horizontal_alignment = 1
script = ExtResource("8_81ckk")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_emjce")

[connection signal="aiming" from="Head/Camera3D/Weapon" to="." method="_on_weapon_aiming"]
[connection signal="shoot" from="Head/Camera3D/Weapon" to="." method="_on_eyasluna_shoot"]

[editable path="Head/Camera3D/Weapon"]
